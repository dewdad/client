<template>
    <div class="mt10">
        <page-header>
            监控实例
            <div slot="right">
                <router-link :to="'app'" class="el-button el-button--small el-button--primary" target="_blank">
                    <i class="iconfont icon-shezhi"></i> 设置报警规则</router-link>
            </div>
        </page-header>
        <el-row class="mt20">
            <el-col :span="24">
                <zt-form :model="searchParams" ref="form" label-width="100px" size="small">
                    <zt-form-item label="监控类型">
                        <el-radio-group class="primary" v-model="searchParams.monitortype" size="small">
                            <el-radio v-for="item in monitortypelist" :key="item.value" border :label="item.key">{{item.value}}</el-radio>
                        </el-radio-group>
                    </zt-form-item>
                    <zt-form-item label="查询时间">
                        <el-radio-group class="primary" v-model="searchParams.period" size="small" @change="timeChange">
                            <el-radio v-for="item in timelist" :key="item.value" border :label="item.key">{{item.value}}</el-radio>
                        </el-radio-group>
                    </zt-form-item>
                </zt-form>
            </el-col>
        </el-row>
        <el-row class="mt20">
            <el-col :span="24" v-if="searchParams.monitortype === 1">
                <section class="chart-box">
                    <h5>CPU和内存利用率</h5>
                    <div class="chart mt10">
                        <charts-line :legend-visible="false" :loading="loading" :data-empty="cpumemUsedDatas.dataEmpty" :chart-data="cpumemUsedDatas.datas" :settings="cpumemUsedDatas.settings" :chartExtendData="cpumemUsedDatas.chartExtend" height="320px"></charts-line>
                    </div>
                </section>
                <section class="chart-box">
                    <h5>磁盘空间</h5>
                    <div class="chart mt10">
                    </div>
                </section>
                <section class="chart-box">
                    <h5>IOPS</h5>
                    <div class="chart mt10">
                    </div>
                </section>
            </el-col>
            <el-col :span="24" v-if="searchParams.monitortype === 2">
                <section class="chart-box">
                    <h5>数据库总连接数</h5>
                    <div class="chart mt10">
                    </div>
                </section>
                <section class="chart-box">
                    <h5>TPS(平均每秒事务数) /QPS(平均每秒SQL语句执行次数)</h5>
                    <div class="chart mt10">
                    </div>
                </section>
                <section class="chart-box">
                    <h5>InnoDB缓存读命中率、使用率、脏块率</h5>
                    <div class="chart mt10">
                    </div>
                </section>
                <section class="chart-box">
                    <h5>InnoDB读写量</h5>
                    <div class="chart mt10">
                    </div>
                </section>
            </el-col>
        </el-row>
    </div>
</template>
<script>
import {mapState} from 'vuex';
import {DICT_RDS} from '@/constants/dicts/rds';
import {dateFormat, convertToVchartData} from '@/utils/utils';
import {resourcesMoniterData, engineMoniterData} from '@/service/rds/monitor';
import ChartsLine from '@/components/charts/ChartsLine';
let chartExtend = {
    grid: {
        top: 10,
        bottom: 0,
        left: 15,
        right: 15
    }
};
export default {
    name: 'Monitor',
    data() {
        return {
            loading: false,
            monitortypelist: DICT_RDS.MONITOR_TYPE,
            timelist: DICT_RDS.TIMELIST,
            searchParams: {
                monitortype: DICT_RDS.MONITOR_TYPE[0].key,
                period: DICT_RDS.TIMELIST[1].key,
                startTime: '',
                endTime: ''
            },
            cpumemUsedDatas: {
                settings: {
                    // labelMap: {
                    //     mem: '内存',
                    //     cpu: 'CPU'
                    // },
                    area: true,
                    // yAxisType: ['percent'],
                },
                datas: {
                    columns: [],
                    rows: []
                },
                dataEmpty: false,
                chartExtend: {
                    yAxis: {
                        type: 'value',
                        axisLabel: {formatter: '{value} %'}
                    },
                    ...chartExtend
                }
            }
        };
    },
    components: {
        ChartsLine
    },
    computed: {
        ...mapState({
            rdsInst: state => state.rds.instance
        }),
        instId: function() {
            return this.$route.params.id;
        }
    },
    watch: {
        'searchParams.monitortype': function() {
            this.getChartData();
        },
        'searchParams.endTime': function() {
            this.getChartData();
        }
    },
    created() {
        let date = new Date();
        // 设置默认查询时间一天内
        this.searchParams.startTime = dateFormat(date, 'YYYY-MM-DD HH:mm:ss');
        this.searchParams.endTime = dateFormat(date.setDate(date.getDate() - 1), 'YYYY-MM-DD HH:mm:ss');
        this.getChartData();
    },
    methods: {
        getChartData() {
            this.loading = true;
            // 资源监控
            if (this.searchParams.monitortype === 1) {
                this.resourcesMoniterData();
            }
            // 引擎监控
            if (this.searchParams.monitortype === 2) {
                this.engineMoniterData();
            }
        },
        resourcesMoniterData() {
            resourcesMoniterData(this.instId, {startTime: this.searchParams.startTime, endTime: this.searchParams.endTime})
                .then(res => {
                    let datas = [
                        {
                            seriesData: [
                                '0.17',
                                '0.18',
                                '0.17',
                                '0.18',
                                '0.19',
                                '0.21',
                                '0.20',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.17',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.17',
                                '0.19',
                                '0.17',
                                '0.17',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.17',
                                '0.17',
                                '0.17',
                                '0.17',
                                '0.17',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.17',
                                '0.18',
                                '0.17',
                                '0.18',
                                '0.17',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.17',
                                '0.17',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.17',
                                '0.18',
                                '0.19',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.20',
                                '0.19',
                                '0.19',
                                '0.20',
                                '0.18',
                                '0.19',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.19',
                                '0.18',
                                '0.19',
                                '0.18',
                                '0.18',
                                '0.17',
                                '0.19',
                                '0.17',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.17',
                                '0.18',
                                '0.18',
                                '0.17',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.17',
                                '0.17',
                                '0.17',
                                '0.18',
                                '0.18',
                                '0.17',
                                '0.17',
                                '0.17',
                                '0.18',
                                '0.17',
                                '0.17',
                                '0.17',
                                '0.17',
                                '0.17',
                                '0.17',
                                '0.17',
                                '0.18',
                                '0.17',
                                '0.18',
                                '0.17',
                                '0.18',
                                '0.18',
                                '0.17',
                                '0.17',
                                '0.18',
                                '0.17',
                                '0.18',
                                '0.17',
                                '0.18',
                                '0.19',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.17',
                                '0.17',
                                '0.17',
                                '0.17',
                                '0.18',
                                '0.17',
                                '0.17',
                                '0.18',
                                '0.17',
                                '0.18',
                                '0.17',
                                '0.18',
                                '0.18',
                                '0.17',
                                '0.17',
                                '0.17',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.19',
                                '0.18',
                                '0.18',
                                '0.17',
                                '0.18',
                                '0.17',
                                '0.18',
                                '0.18',
                                '0.17',
                                '0.18',
                                '0.19',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.19',
                                '0.17',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.17',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.17',
                                '0.17',
                                '0.18',
                                '0.17',
                                '0.18',
                                '0.17',
                                '0.18',
                                '0.18',
                                '0.19',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.17',
                                '0.17',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.19',
                                '0.18',
                                '0.17',
                                '0.17',
                                '0.17',
                                '0.17',
                                '0.17',
                                '0.17',
                                '0.17',
                                '0.18',
                                '0.18',
                                '0.17',
                                '0.17',
                                '0.18',
                                '0.17',
                                '0.17',
                                '0.18',
                                '0.17',
                                '0.18',
                                '0.18',
                                '0.17',
                                '0.18',
                                '0.19',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.17',
                                '0.17',
                                '0.17',
                                '0.17',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.17',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.17',
                                '0.18',
                                '0.18',
                                '0.17',
                                '0.17',
                                '0.17',
                                '0.17',
                                '0.17',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.17',
                                '0.20',
                                '0.18',
                                '0.20',
                                '0.18',
                                '0.19',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.18',
                                '0.19'
                            ],
                            average: '0.18',
                            xData: [
                                '10:00',
                                '10:05',
                                '10:10',
                                '10:15',
                                '10:20',
                                '10:25',
                                '10:30',
                                '10:35',
                                '10:40',
                                '10:45',
                                '10:50',
                                '10:55',
                                '11:00',
                                '11:05',
                                '11:10',
                                '11:15',
                                '11:20',
                                '11:25',
                                '11:30',
                                '11:35',
                                '11:40',
                                '11:45',
                                '11:50',
                                '11:55',
                                '12:00',
                                '12:05',
                                '12:10',
                                '12:15',
                                '12:20',
                                '12:25',
                                '12:30',
                                '12:35',
                                '12:40',
                                '12:45',
                                '12:50',
                                '12:55',
                                '13:00',
                                '13:05',
                                '13:10',
                                '13:15',
                                '13:20',
                                '13:25',
                                '13:30',
                                '13:35',
                                '13:40',
                                '13:45',
                                '13:50',
                                '13:55',
                                '14:00',
                                '14:05',
                                '14:10',
                                '14:15',
                                '14:20',
                                '14:25',
                                '14:30',
                                '14:35',
                                '14:40',
                                '14:45',
                                '14:50',
                                '14:55',
                                '15:00',
                                '15:05',
                                '15:10',
                                '15:15',
                                '15:20',
                                '15:25',
                                '15:30',
                                '15:35',
                                '15:40',
                                '15:45',
                                '15:50',
                                '15:55',
                                '16:00',
                                '16:05',
                                '16:10',
                                '16:15',
                                '16:20',
                                '16:25',
                                '16:30',
                                '16:35',
                                '16:40',
                                '16:45',
                                '16:50',
                                '16:55',
                                '17:00',
                                '17:05',
                                '17:10',
                                '17:15',
                                '17:20',
                                '17:25',
                                '17:30',
                                '17:35',
                                '17:40',
                                '17:45',
                                '17:50',
                                '17:55',
                                '18:00',
                                '18:05',
                                '18:10',
                                '18:15',
                                '18:20',
                                '18:25',
                                '18:30',
                                '18:35',
                                '18:40',
                                '18:45',
                                '18:50',
                                '18:55',
                                '19:00',
                                '19:05',
                                '19:10',
                                '19:15',
                                '19:20',
                                '19:25',
                                '19:30',
                                '19:35',
                                '19:40',
                                '19:45',
                                '19:50',
                                '19:55',
                                '20:00',
                                '20:05',
                                '20:10',
                                '20:15',
                                '20:20',
                                '20:25',
                                '20:30',
                                '20:35',
                                '20:40',
                                '20:45',
                                '20:50',
                                '20:55',
                                '21:00',
                                '21:05',
                                '21:10',
                                '21:15',
                                '21:20',
                                '21:25',
                                '21:30',
                                '21:35',
                                '21:40',
                                '21:45',
                                '21:50',
                                '21:55',
                                '22:00',
                                '22:05',
                                '22:10',
                                '22:15',
                                '22:20',
                                '22:25',
                                '22:30',
                                '22:35',
                                '22:40',
                                '22:45',
                                '22:50',
                                '22:55',
                                '23:00',
                                '23:05',
                                '23:10',
                                '23:15',
                                '23:20',
                                '23:25',
                                '23:30',
                                '23:35',
                                '23:40',
                                '23:45',
                                '23:50',
                                '23:55',
                                '00:00',
                                '00:05',
                                '00:10',
                                '00:15',
                                '00:20',
                                '00:25',
                                '00:30',
                                '00:35',
                                '00:40',
                                '00:45',
                                '00:50',
                                '00:55',
                                '01:00',
                                '01:05',
                                '01:10',
                                '01:15',
                                '01:20',
                                '01:25',
                                '01:30',
                                '01:35',
                                '01:40',
                                '01:45',
                                '01:50',
                                '01:55',
                                '02:00',
                                '02:05',
                                '02:10',
                                '02:15',
                                '02:20',
                                '02:25',
                                '02:30',
                                '02:35',
                                '02:40',
                                '02:45',
                                '02:50',
                                '02:55',
                                '03:00',
                                '03:05',
                                '03:10',
                                '03:15',
                                '03:20',
                                '03:25',
                                '03:30',
                                '03:35',
                                '03:40',
                                '03:45',
                                '03:50',
                                '03:55',
                                '04:00',
                                '04:05',
                                '04:10',
                                '04:15',
                                '04:20',
                                '04:25',
                                '04:30',
                                '04:35',
                                '04:40',
                                '04:45',
                                '04:50',
                                '04:55',
                                '05:00',
                                '05:05',
                                '05:10',
                                '05:15',
                                '05:20',
                                '05:25',
                                '05:30',
                                '05:35',
                                '05:40',
                                '05:45',
                                '05:50',
                                '05:55',
                                '06:00',
                                '06:05',
                                '06:10',
                                '06:15',
                                '06:20',
                                '06:25',
                                '06:30',
                                '06:35',
                                '06:40',
                                '06:45',
                                '06:50',
                                '06:55',
                                '07:00',
                                '07:05',
                                '07:10',
                                '07:15',
                                '07:20',
                                '07:25',
                                '07:30',
                                '07:35',
                                '07:40',
                                '07:45',
                                '07:50',
                                '07:55',
                                '08:00',
                                '08:05',
                                '08:10',
                                '08:15',
                                '08:20',
                                '08:25',
                                '08:30',
                                '08:35',
                                '08:40',
                                '08:45',
                                '08:50',
                                '08:55',
                                '09:00',
                                '09:05',
                                '09:10',
                                '09:15',
                                '09:20',
                                '09:25',
                                '09:30',
                                '09:35',
                                '09:40',
                                '09:45',
                                '09:50',
                                '09:55',
                                '10:00'
                            ],
                            legendname: 'cpu'
                        },
                        {
                            seriesData: [
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.67',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.67',
                                '0.67',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.67',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68',
                                '0.68'
                            ],
                            average: '0.68',
                            xData: [
                                '10:00',
                                '10:05',
                                '10:10',
                                '10:15',
                                '10:20',
                                '10:25',
                                '10:30',
                                '10:35',
                                '10:40',
                                '10:45',
                                '10:50',
                                '10:55',
                                '11:00',
                                '11:05',
                                '11:10',
                                '11:15',
                                '11:20',
                                '11:25',
                                '11:30',
                                '11:35',
                                '11:40',
                                '11:45',
                                '11:50',
                                '11:55',
                                '12:00',
                                '12:05',
                                '12:10',
                                '12:15',
                                '12:20',
                                '12:25',
                                '12:30',
                                '12:35',
                                '12:40',
                                '12:45',
                                '12:50',
                                '12:55',
                                '13:00',
                                '13:05',
                                '13:10',
                                '13:15',
                                '13:20',
                                '13:25',
                                '13:30',
                                '13:35',
                                '13:40',
                                '13:45',
                                '13:50',
                                '13:55',
                                '14:00',
                                '14:05',
                                '14:10',
                                '14:15',
                                '14:20',
                                '14:25',
                                '14:30',
                                '14:35',
                                '14:40',
                                '14:45',
                                '14:50',
                                '14:55',
                                '15:00',
                                '15:05',
                                '15:10',
                                '15:15',
                                '15:20',
                                '15:25',
                                '15:30',
                                '15:35',
                                '15:40',
                                '15:45',
                                '15:50',
                                '15:55',
                                '16:00',
                                '16:05',
                                '16:10',
                                '16:15',
                                '16:20',
                                '16:25',
                                '16:30',
                                '16:35',
                                '16:40',
                                '16:45',
                                '16:50',
                                '16:55',
                                '17:00',
                                '17:05',
                                '17:10',
                                '17:15',
                                '17:20',
                                '17:25',
                                '17:30',
                                '17:35',
                                '17:40',
                                '17:45',
                                '17:50',
                                '17:55',
                                '18:00',
                                '18:05',
                                '18:10',
                                '18:15',
                                '18:20',
                                '18:25',
                                '18:30',
                                '18:35',
                                '18:40',
                                '18:45',
                                '18:50',
                                '18:55',
                                '19:00',
                                '19:05',
                                '19:10',
                                '19:15',
                                '19:20',
                                '19:25',
                                '19:30',
                                '19:35',
                                '19:40',
                                '19:45',
                                '19:50',
                                '19:55',
                                '20:00',
                                '20:05',
                                '20:10',
                                '20:15',
                                '20:20',
                                '20:25',
                                '20:30',
                                '20:35',
                                '20:40',
                                '20:45',
                                '20:50',
                                '20:55',
                                '21:00',
                                '21:05',
                                '21:10',
                                '21:15',
                                '21:20',
                                '21:25',
                                '21:30',
                                '21:35',
                                '21:40',
                                '21:45',
                                '21:50',
                                '21:55',
                                '22:00',
                                '22:05',
                                '22:10',
                                '22:15',
                                '22:20',
                                '22:25',
                                '22:30',
                                '22:35',
                                '22:40',
                                '22:45',
                                '22:50',
                                '22:55',
                                '23:00',
                                '23:05',
                                '23:10',
                                '23:15',
                                '23:20',
                                '23:25',
                                '23:30',
                                '23:35',
                                '23:40',
                                '23:45',
                                '23:50',
                                '23:55',
                                '00:00',
                                '00:05',
                                '00:10',
                                '00:15',
                                '00:20',
                                '00:25',
                                '00:30',
                                '00:35',
                                '00:40',
                                '00:45',
                                '00:50',
                                '00:55',
                                '01:00',
                                '01:05',
                                '01:10',
                                '01:15',
                                '01:20',
                                '01:25',
                                '01:30',
                                '01:35',
                                '01:40',
                                '01:45',
                                '01:50',
                                '01:55',
                                '02:00',
                                '02:05',
                                '02:10',
                                '02:15',
                                '02:20',
                                '02:25',
                                '02:30',
                                '02:35',
                                '02:40',
                                '02:45',
                                '02:50',
                                '02:55',
                                '03:00',
                                '03:05',
                                '03:10',
                                '03:15',
                                '03:20',
                                '03:25',
                                '03:30',
                                '03:35',
                                '03:40',
                                '03:45',
                                '03:50',
                                '03:55',
                                '04:00',
                                '04:05',
                                '04:10',
                                '04:15',
                                '04:20',
                                '04:25',
                                '04:30',
                                '04:35',
                                '04:40',
                                '04:45',
                                '04:50',
                                '04:55',
                                '05:00',
                                '05:05',
                                '05:10',
                                '05:15',
                                '05:20',
                                '05:25',
                                '05:30',
                                '05:35',
                                '05:40',
                                '05:45',
                                '05:50',
                                '05:55',
                                '06:00',
                                '06:05',
                                '06:10',
                                '06:15',
                                '06:20',
                                '06:25',
                                '06:30',
                                '06:35',
                                '06:40',
                                '06:45',
                                '06:50',
                                '06:55',
                                '07:00',
                                '07:05',
                                '07:10',
                                '07:15',
                                '07:20',
                                '07:25',
                                '07:30',
                                '07:35',
                                '07:40',
                                '07:45',
                                '07:50',
                                '07:55',
                                '08:00',
                                '08:05',
                                '08:10',
                                '08:15',
                                '08:20',
                                '08:25',
                                '08:30',
                                '08:35',
                                '08:40',
                                '08:45',
                                '08:50',
                                '08:55',
                                '09:00',
                                '09:05',
                                '09:10',
                                '09:15',
                                '09:20',
                                '09:25',
                                '09:30',
                                '09:35',
                                '09:40',
                                '09:45',
                                '09:50',
                                '09:55',
                                '10:00'
                            ],
                            legendname: '内存'
                        }
                    ];
                    this.cpumemUsedDatas.datas = convertToVchartData(datas);
                    this.cpumemUsedDatas.datas.rows = this.cpumemUsedDatas.datas.rows.filter((item, index) => {
                        return (index + 1) % 10 === 0 || index === this.cpumemUsedDatas.datas.rows.length - 1;
                    });
                })
                .finally(() => {
                    this.loading = false;
                });
        },
        engineMoniterData() {
            engineMoniterData(this.instId, {startTime: this.searchParams.startTime, endTime: this.searchParams.endTime})
                .then(res => {})
                .finally(() => {
                    this.loading = false;
                });
        },
        // 时间选择改变时执行
        timeChange(value) {
            let date = new Date();
            this.searchParams.startTime = dateFormat(date, 'YYYY-MM-DD HH:mm:ss');
            switch (value) {
                case 1:
                    date.setHours(date.getHours() - 1); // 1小时内
                    break;
                case 2:
                    date.setDate(date.getDate() - 1); // 1天内
                    break;
                case 3:
                    date.setDate(date.getDate() - 7); // 7天内
                    break;
                case 4:
                    date.setMonth(date.getMonth() - 1); // 1个月内
                    break;
                default:
                    date.setDate(date.getDate() - 1);
                    break;
            }
            this.searchParams.endTime = dateFormat(date, 'YYYY-MM-DD HH:mm:ss');
        }
    }
};
</script>
<style scoped>
</style>
